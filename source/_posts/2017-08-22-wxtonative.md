---
title: 从微信跳转到Native具体页面
copyright: true
top: 0
date: 2017-08-22 21:50:23
tags:
categories:
password:
---
**前提：最近公司有个新的需求，要从微信的H5页面跳转到Native具体页面。
既然有需求就得做出来呀，那么就开始干吧 **  

# 第一种方案：微信的AppLink

**既然微信限制了scheme的跳转，那么首先去微信开放平台看看**  
  翻到了[Applink能力](http://wiki.open.qq.com/index.php?title=mobile/%E5%BA%94%E7%94%A8%E5%AE%9D%E5%BE%AE%E4%B8%8B%E8%BD%BD#3.3_Applink.E8.83.BD.E5.8A.9B)和[AppLink接入](http://wiki.open.qq.com/index.php?title=AppLink%E6%8E%A5%E5%85%A5)，兴致勃勃的加了QQ群，然后就。。。  
  直接上图
  ![](http://osafk49j3.bkt.clouddn.com/WX20170822-230022@2x.png)
  <!--more-->
  ![](http://osafk49j3.bkt.clouddn.com/WX20170822-230457@2x.png)
  ![](http://osafk49j3.bkt.clouddn.com/WechatIMG55.png)
  那么第一种方法宣告失败了。。。

  # 第二方案某SDK
  既然微信的做不到，那么就继续找吧，翻了好久翻到某SDK，按照官网上给的技术文档配置了下，果然可以拉起，拉起的流程是点击自己的H5某个按钮，调用SDK给的JS文件，然后会跳到SDK的一个网页，然后在微信浏览器内拉起应用宝的微链接，微信会弹窗提醒，即将离开微信，打开其他应用。虽然流程复杂，还掺加其他网页，但是至少功能实现了，产品也妥协了。  
  关于这个第三方的SDK，虽然是免费的，但毕竟是商业产品，避免打广告嫌疑，有需求的同学可以私聊我，我的邮箱buhui0325001@163.com 。  
  # 第三方案自己实现绕过微信
  但是作为一个较真的程序员，我就在想那个SDK怎么做到的呢？绕过微信的封锁，继续一遍一遍的读技术文档，研究代码中实现流程，发现它的实现原理。
  原理很简单，就是当你点击网页某个打开APP的按钮时候，将scheme上传到的服务器上，然后同时调用微信的微链接，跳转到微下载页面,打开应用后，判断(getIntent().getData()==null)，当为空的时候，去服务器获取要跳转的scheme,当然某SDK 有一套自己的模糊比配原则，但无非就是手机型号，IP地址，等等信息进行比配，不过他的SDK比配率还是不错的。   
  既然原理我们知道了，就可以自己做了，这样还能少引用一个SDK，迷糊匹配无非就是找个唯一的ID，那么如果你们产品需要登录才能用的话，那么久很简单了，当进入H5时候，拿到userID，然后点击打开APP的按钮，将要跳转的scheme和userID传到自己的服务器，打开APP后去服务器根据userID获取到scheme,接下来就是正常该去哪页去那页了。  如果你们的产品不是必须登录的，那么久自己做模匹配吧。  
  这个方法微信应该是无法阻拦的，除非他把你的应用下架，或者禁用微下载。当然如果能满足微信的AppLink条件，还是直接使用AppLink的好。  
  **希望微信请给开发者留一条活路。**   
  在搜方案的时候，找到一篇[突破Android微信微博浏览器限制直接拉起应用](https://zhuanlan.zhihu.com/p/28612031)也有两种解决方案，但是都有限制。
